<!DOCTYPE html>
<html lang="pl">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Bramki Logiczne</title>
		<meta name="description" content="Opracowanie zagadanień związanych z Bramkami Logicznymi">
		<meta name="author" content="Kamil Tatoń, Szymon Bogunia, Maksym Stanek">
		
		<meta http-equiv="X-UA-Compatible" content="IE=edge">

		<link rel="stylesheet" href="../css/bootstrap.min.css">
		<link rel="stylesheet" href="../css/main.css">
		<link rel="stylesheet" href="../css/sub.css">
		<link rel="stylesheet" href="../css/fontello.css">

		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;700;900&display=swap" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;600;700&display=swap" rel="stylesheet">

		<script src="../js/jquery-3.5.1.min.js"></script>
		<script src="../js/jquery.scrollTo.min.js"></script>
		<script src="../js/scrollTop.js"></script>

		<script src="../js/go.js"></script>
		<script src="../js/Figures.js"></script>
		
		<script id="code">
	  
		  var red = "orangered";  // 0 or false
		  var green = "forestgreen";  // 1 or true
	  
		  function init() {
			if (window.goSamples) goSamples();  // init for these samples -- you don't need to call this
			var $ = go.GraphObject.make;  // for conciseness in defining templates
	  
			myDiagram =
			  $(go.Diagram, "myDiagramDiv",  // create a new Diagram in the HTML DIV element "myDiagramDiv"
				{
				  "draggingTool.isGridSnapEnabled": true,  // dragged nodes will snap to a grid of 10x10 cells
				  "undoManager.isEnabled": true
				});
	  
			// when the document is modified, add a "*" to the title and enable the "Save" button
			myDiagram.addDiagramListener("Modified", function(e) {
			  var button = document.getElementById("saveModel");
			  if (button) button.disabled = !myDiagram.isModified;
			  var idx = document.title.indexOf("*");
			  if (myDiagram.isModified) {
				if (idx < 0) document.title += "*";
			  } else {
				if (idx >= 0) document.title = document.title.substr(0, idx);
			  }
			});
	  
			var palette = new go.Palette("palette");  // create a new Palette in the HTML DIV element "palette"
	  
			// creates relinkable Links that will avoid crossing Nodes when possible and will jump over other Links in their paths
			myDiagram.linkTemplate =
			  $(go.Link,
				{
				  routing: go.Link.AvoidsNodes,
				  curve: go.Link.JumpOver,
				  corner: 3,
				  relinkableFrom: true, relinkableTo: true,
				  selectionAdorned: false, // Links are not adorned when selected so that their color remains visible.
				  shadowOffset: new go.Point(0, 0), shadowBlur: 5, shadowColor: "blue",
				},
				new go.Binding("isShadowed", "isSelected").ofObject(),
				$(go.Shape,
				  { name: "SHAPE", strokeWidth: 2, stroke: red }));
	  
			// node template helpers
			var sharedToolTip =
			  $("ToolTip",
				{ "Border.figure": "RoundedRectangle" },
				$(go.TextBlock, { margin: 2 },
				  new go.Binding("text", "", function(d) { return d.category; })));
	  
			// define some common property settings
			function nodeStyle() {
			  return [new go.Binding("location", "loc", go.Point.parse).makeTwoWay(go.Point.stringify),
			  new go.Binding("isShadowed", "isSelected").ofObject(),
			  {
				selectionAdorned: false,
				shadowOffset: new go.Point(0, 0),
				shadowBlur: 15,
				shadowColor: "blue",
				toolTip: sharedToolTip
			  }];
			}
	  
			function shapeStyle() {
			  return {
				name: "NODESHAPE",
				fill: "lightgray",
				stroke: "darkslategray",
				desiredSize: new go.Size(40, 40),
				strokeWidth: 2
			  };
			}
	  
			function portStyle(input) {
			  return {
				desiredSize: new go.Size(6, 6),
				fill: "black",
				fromSpot: go.Spot.Right,
				fromLinkable: !input,
				toSpot: go.Spot.Left,
				toLinkable: input,
				toMaxLinks: 1,
				cursor: "pointer"
			  };
			}
	  
			// define templates for each type of node
			var inputTemplate =
			  $(go.Node, "Spot", nodeStyle(),
				$(go.Shape, "Circle", shapeStyle(),
				  { fill: red }),  // override the default fill (from shapeStyle()) to be red
				$(go.Shape, "Rectangle", portStyle(false),  // the only port
				  { portId: "", alignment: new go.Spot(1, 0.5) }),
				{ // if double-clicked, an input node will change its value, represented by the color.
				  doubleClick: function(e, obj) {
					e.diagram.startTransaction("Toggle Input");
					var shp = obj.findObject("NODESHAPE");
					shp.fill = (shp.fill === green) ? red : green;
					updateStates();
					e.diagram.commitTransaction("Toggle Input");
				  }
				}
			  );
	  
			var outputTemplate =
			  $(go.Node, "Spot", nodeStyle(),
				$(go.Shape, "Rectangle", shapeStyle(),
				  { fill: green }),  // override the default fill (from shapeStyle()) to be green
				$(go.Shape, "Rectangle", portStyle(true),  // the only port
				  { portId: "", alignment: new go.Spot(0, 0.5) })
			  );
	  
			var andTemplate =
			  $(go.Node, "Spot", nodeStyle(),
				$(go.Shape, "AndGate", shapeStyle()),
				$(go.Shape, "Rectangle", portStyle(true),
				  { portId: "in1", alignment: new go.Spot(0, 0.3) }),
				$(go.Shape, "Rectangle", portStyle(true),
				  { portId: "in2", alignment: new go.Spot(0, 0.7) }),
				$(go.Shape, "Rectangle", portStyle(false),
				  { portId: "out", alignment: new go.Spot(1, 0.5) })
			  );
	  
			var orTemplate =
			  $(go.Node, "Spot", nodeStyle(),
				$(go.Shape, "OrGate", shapeStyle()),
				$(go.Shape, "Rectangle", portStyle(true),
				  { portId: "in1", alignment: new go.Spot(0.16, 0.3) }),
				$(go.Shape, "Rectangle", portStyle(true),
				  { portId: "in2", alignment: new go.Spot(0.16, 0.7) }),
				$(go.Shape, "Rectangle", portStyle(false),
				  { portId: "out", alignment: new go.Spot(1, 0.5) })
			  );
	  
			var xorTemplate =
			  $(go.Node, "Spot", nodeStyle(),
				$(go.Shape, "XorGate", shapeStyle()),
				$(go.Shape, "Rectangle", portStyle(true),
				  { portId: "in1", alignment: new go.Spot(0.26, 0.3) }),
				$(go.Shape, "Rectangle", portStyle(true),
				  { portId: "in2", alignment: new go.Spot(0.26, 0.7) }),
				$(go.Shape, "Rectangle", portStyle(false),
				  { portId: "out", alignment: new go.Spot(1, 0.5) })
			  );
	  
			var norTemplate =
			  $(go.Node, "Spot", nodeStyle(),
				$(go.Shape, "NorGate", shapeStyle()),
				$(go.Shape, "Rectangle", portStyle(true),
				  { portId: "in1", alignment: new go.Spot(0.16, 0.3) }),
				$(go.Shape, "Rectangle", portStyle(true),
				  { portId: "in2", alignment: new go.Spot(0.16, 0.7) }),
				$(go.Shape, "Rectangle", portStyle(false),
				  { portId: "out", alignment: new go.Spot(1, 0.5) })
			  );
	  
			var xnorTemplate =
			  $(go.Node, "Spot", nodeStyle(),
				$(go.Shape, "XnorGate", shapeStyle()),
				$(go.Shape, "Rectangle", portStyle(true),
				  { portId: "in1", alignment: new go.Spot(0.26, 0.3) }),
				$(go.Shape, "Rectangle", portStyle(true),
				  { portId: "in2", alignment: new go.Spot(0.26, 0.7) }),
				$(go.Shape, "Rectangle", portStyle(false),
				  { portId: "out", alignment: new go.Spot(1, 0.5) })
			  );
	  
			var nandTemplate =
			  $(go.Node, "Spot", nodeStyle(),
				$(go.Shape, "NandGate", shapeStyle()),
				$(go.Shape, "Rectangle", portStyle(true),
				  { portId: "in1", alignment: new go.Spot(0, 0.3) }),
				$(go.Shape, "Rectangle", portStyle(true),
				  { portId: "in2", alignment: new go.Spot(0, 0.7) }),
				$(go.Shape, "Rectangle", portStyle(false),
				  { portId: "out", alignment: new go.Spot(1, 0.5) })
			  );
	  
			var notTemplate =
			  $(go.Node, "Spot", nodeStyle(),
				$(go.Shape, "Inverter", shapeStyle()),
				$(go.Shape, "Rectangle", portStyle(true),
				  { portId: "in", alignment: new go.Spot(0, 0.5) }),
				$(go.Shape, "Rectangle", portStyle(false),
				  { portId: "out", alignment: new go.Spot(1, 0.5) })
			  );
	  
			// add the templates created above to myDiagram and palette
			myDiagram.nodeTemplateMap.add("input", inputTemplate);
			myDiagram.nodeTemplateMap.add("output", outputTemplate);
			myDiagram.nodeTemplateMap.add("and", andTemplate);
			myDiagram.nodeTemplateMap.add("or", orTemplate);
			myDiagram.nodeTemplateMap.add("xor", xorTemplate);
			myDiagram.nodeTemplateMap.add("not", notTemplate);
			myDiagram.nodeTemplateMap.add("nand", nandTemplate);
			myDiagram.nodeTemplateMap.add("nor", norTemplate);
			myDiagram.nodeTemplateMap.add("xnor", xnorTemplate);
	  
			// share the template map with the Palette
			palette.nodeTemplateMap = myDiagram.nodeTemplateMap;
	  
			palette.model.nodeDataArray = [
			  { category: "input" },
			  { category: "output" },
			  { category: "and" },
			  { category: "or" },
			  { category: "xor" },
			  { category: "not" },
			  { category: "nand" },
			  { category: "nor" },
			  { category: "xnor" }
			];
	  
			// load the initial diagram
			load();
	  
			// continually update the diagram
			loop();
		  }
	  
		  // update the diagram every 250 milliseconds
		  function loop() {
			setTimeout(function() { updateStates(); loop(); }, 250);
		  }
	  
		  // update the value and appearance of each node according to its type and input values
		  function updateStates() {
			var oldskip = myDiagram.skipsUndoManager;
			myDiagram.skipsUndoManager = true;
			// do all "input" nodes first
			myDiagram.nodes.each(function(node) {
			  if (node.category === "input") {
				doInput(node);
			  }
			});
			// now we can do all other kinds of nodes
			myDiagram.nodes.each(function(node) {
			  switch (node.category) {
				case "and": doAnd(node); break;
				case "or": doOr(node); break;
				case "xor": doXor(node); break;
				case "not": doNot(node); break;
				case "nand": doNand(node); break;
				case "nor": doNor(node); break;
				case "xnor": doXnor(node); break;
				case "output": doOutput(node); break;
				case "input": break;  // doInput already called, above
			  }
			});
			myDiagram.skipsUndoManager = oldskip;
		  }
	  
		  // helper predicate
		  function linkIsTrue(link) {  // assume the given Link has a Shape named "SHAPE"
			return link.findObject("SHAPE").stroke === green;
		  }
	  
		  // helper function for propagating results
		  function setOutputLinks(node, color) {
			node.findLinksOutOf().each(function(link) { link.findObject("SHAPE").stroke = color; });
		  }
	  
		  // update nodes by the specific function for its type
		  // determine the color of links coming out of this node based on those coming in and node type
	  
		  function doInput(node) {
			// the output is just the node's Shape.fill
			setOutputLinks(node, node.findObject("NODESHAPE").fill);
		  }
	  
		  function doAnd(node) {
			var color = node.findLinksInto().all(linkIsTrue) ? green : red;
			setOutputLinks(node, color);
		  }
		  function doNand(node) {
			var color = !node.findLinksInto().all(linkIsTrue) ? green : red;
			setOutputLinks(node, color);
		  }
		  function doNot(node) {
			var color = !node.findLinksInto().all(linkIsTrue) ? green : red;
			setOutputLinks(node, color);
		  }
	  
		  function doOr(node) {
			var color = node.findLinksInto().any(linkIsTrue) ? green : red;
			setOutputLinks(node, color);
		  }
		  function doNor(node) {
			var color = !node.findLinksInto().any(linkIsTrue) ? green : red;
			setOutputLinks(node, color);
		  }
	  
		  function doXor(node) {
			var truecount = 0;
			node.findLinksInto().each(function(link) { if (linkIsTrue(link)) truecount++; });
			var color = truecount % 2 !== 0 ? green : red;
			setOutputLinks(node, color);
		  }
		  function doXnor(node) {
			var truecount = 0;
			node.findLinksInto().each(function(link) { if (linkIsTrue(link)) truecount++; });
			var color = truecount % 2 === 0 ? green : red;
			setOutputLinks(node, color);
		  }
	  
		  function doOutput(node) {
			// assume there is just one input link
			// we just need to update the node's Shape.fill
			node.linksConnected.each(function(link) { node.findObject("NODESHAPE").fill = link.findObject("SHAPE").stroke; });
		  }
	  
		  // save a model to and load a model from JSON text, displayed below the Diagram
		  function save() {
			document.getElementById("mySavedModel").value = myDiagram.model.toJson();
			myDiagram.isModified = false;
		  }
		  function load() {
			myDiagram.model = go.Model.fromJson(document.getElementById("mySavedModel").value);
		  }
		</script>

		<script>
			jQuery(function($){
				$.scrollTo(0)

				$('#link1').click(() => {
					$.scrollTo($('#wstep').offset().top -90, 350);
				});

				$('#link2').click(() => {
					$.scrollTo($('#symulator').offset().top -90, 350);
				});

				$('#link3').click(() => {
					$.scrollTo($('#wstep').offset().top -90, 350);
				});

				$('#link4').click(() => {
					$.scrollTo($('#wstep').offset().top -90, 350);
				});

				$('#link5').click(() => {
					$.scrollTo($('#wstep').offset().top -90, 350);
				});
			});
		</script>

		<link rel="icon" href="../img/favicon.png">
	</head>

	<body onload="init()">

		<nav class="navbar navbar-expand-lg sticky-top">

			<div class="container-fluid">

				<a class="navbar-brand ms-1" href="../index.html">
					<img src="../img/favicon.png" width="40" height="40" alt="" class="d-inline-block align-bottom">
				</a>

				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
					<span role="button">
						<i class="icon-menu"></i>
					</span>
				</button>

				<div class="collapse navbar-collapse" id="navbarNav">

					<ul class="navbar-nav mx-auto">

						<li class="nav-item">
							<a class="nav-link" href="../index.html">
								Start
							</a>
						</li>

						<li class="nav-item dropdown">

							<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
								Materiały
							</a>
							
							<ul class="dropdown-menu text-center mt-lg-1" aria-labelledby="navbarDropdown">
								<li><a class="dropdown-item" href="algebra-boolea.html">Algebra Boole'a</a></li>
								<li><a class="dropdown-item" href="bramki-logiczne.html">Bramki Logiczne</a></li>
								<li><a class="dropdown-item" href="uklady-cyfrowe.html">Układy Cyfrowe</a></li>
							</ul>
						
						</li>

						<li class="nav-item">
							<a class="nav-link" href="o-projekcie.html">
								O projekcie
							</a>
						</li>

					</ul>

				</div>

			</div>

		</nav>

		<main>

			<article>

				<div class="containter">

					<div class="row g-0 flex-row-reverse">

						<aside class="col-lg-3 col-xxl-2 p-5 transition-width sidebar">

							<ul class="list-group">
								<a id="link1" href="#" class="list-group-item list-group-item-action">Wstęp</a>
								<a id="link2" href="#" class="list-group-item list-group-item-action">Symulator układu</a>
								<a id="link3" href="#" class="list-group-item list-group-item-action">Lorem</a>
								<a id="link4" href="#" class="list-group-item list-group-item-action">Ipsum</a>
								<a id="link5" href="#" class="list-group-item list-group-item-action">Dolor</a>
							</ul>

						</aside>

						<div class="col-lg-8 col-xxl-9 p-5 transition-width content">

							<header>

								<h1 class="text-center">Bramki Logiczne</h1>

							</header>

							<h2 id="wstep">Wstep</h2>

							<p>Suspendisse et nibh vel libero aliquam lacinia. Sed vel ultrices neque, id iaculis turpis. Maecenas varius quam at dignissim tempus. Quisque sit amet congue orci, vitae vehicula massa. Sed mattis risus quis augue vulputate tempus. Quisque consectetur neque sed massa egestas, sit amet facilisis diam pellentesque. Maecenas vitae mauris et nisl feugiat malesuada. Pellentesque risus elit, eleifend a scelerisque eget, porttitor sit amet dolor. Phasellus at massa diam. Curabitur ac commodo risus. Etiam nec tincidunt ante. Donec nisl neque, sagittis nec scelerisque et, ullamcorper id quam. Suspendisse condimentum blandit congue.</p>

							<h2 id="symulator">Symulator układu</h2>

							<div id="sample">

								<div style="width: 100%; display: flex; justify-content: space-between">
									<div id="palette" style="width: 100px; height: 500px; margin-right: 2px; background-color: whitesmoke; border: solid 1px black"></div>
									<div id="myDiagramDiv" style="flex-grow: 1; height: 500px; border: solid 1px black"></div>
								</div>

								<div>

									<div style="margin-top: 10px">
										<button id="saveModel" onclick="save()">Zapisz</button>
										<button onclick="load()">Wczytaj</button>
										Model zapisany w formacie JSON:
									</div>

									<textarea id="mySavedModel" style="margin-top: 10px; width:100%; height:200px;">
{ "class": "go.GraphLinksModel",
  "linkFromPortIdProperty": "fromPort",
  "linkToPortIdProperty": "toPort",
  "nodeDataArray": [
{"category":"input", "key":"input1", "loc":"-150 -80" },
{"category":"or", "key":"or1", "loc":"-70 0" },
{"category":"not", "key":"not1", "loc":"10 0" },
{"category":"xor", "key":"xor1", "loc":"100 0" },
{"category":"or", "key":"or2", "loc":"200 0" },
{"category":"output", "key":"output1", "loc":"200 -100" }
 ],
  "linkDataArray": [
{"from":"input1", "fromPort":"out", "to":"or1", "toPort":"in1"},
{"from":"or1", "fromPort":"out", "to":"not1", "toPort":"in"},
{"from":"not1", "fromPort":"out", "to":"or1", "toPort":"in2"},
{"from":"not1", "fromPort":"out", "to":"xor1", "toPort":"in1"},
{"from":"xor1", "fromPort":"out", "to":"or2", "toPort":"in1"},
{"from":"or2", "fromPort":"out", "to":"xor1", "toPort":"in2"},
{"from":"xor1", "fromPort":"out", "to":"output1", "toPort":""}
 ]}
									</textarea>

								</div>

								<p>
									Twórcą symulatora układu cyfrowego jest producent oprogramowania Northwoods Software. Wykonany został przy użyciu biblioteki GoJS ich autorstwa. Umożliwia użytkownikowi tworzenie obwodów za pomocą bramek i przewodów, które są aktualizowane za każdym razem, gdy łącze jest modyfikowane.
								</p>

								<p>
									Link do oficjalnej strony:
									<a href="https://gojs.net/latest/extensions/PortShifting.html" style="word-break: break-all;">
										https://gojs.net/latest/extensions/PortShifting.html
									</a>
								</p>

							</div>
								
							<a href="#" id="go-top" class="btn" role="button">
								<i class="icon-up-open"></i>
							</a>

						</div>

					</div>

				</div>

			</article>

		</main>

		<footer>
			<a href="https://github.com/2Ti2g-Praktyka/technika-cyfrowa" target="_blank"><i class="icon-github-circled"></i></a>
		</footer>

		<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js" integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi" crossorigin="anonymous"></script>
		<script src="../js/bootstrap.min.js"></script>
	</body>
</html>